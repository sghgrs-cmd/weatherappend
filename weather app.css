:root {
  --bg-gradient: linear-gradient(180deg,#0e0f14 0%, #1a1230 100%);
  --bg-sunny: linear-gradient(120deg,#ffe259 0%,#ffa751 100%);
  --bg-rain: linear-gradient(120deg,#485563 0%,#29323c 100%);
  --bg-night: linear-gradient(120deg,#232526 0%,#414345 100%);
  --panel-dark: rgba(25,25,30,0.82);
  --panel-light: #fff;
  --accent: #27f29a;
  --accent2: #7b3dfc;
  --accent-gradient: linear-gradient(90deg,#27f29a,#7b3dfc);
  --text-light: #e6eef1;
  --text-dark: #181c22;
  --muted: #9aa0a6;
  --shadow: 0 8px 32px rgba(0,0,0,0.18);
  --radius: 22px;
  --transition: 0.3s cubic-bezier(.4,0,.2,1);
  --card-light: #f7f9fc;
  --card-dark: #23243a;
}

html,body {
  height:100%;
  margin:0; padding:0;
}
body, .weather-bg {
  min-height:100vh;
  min-width:100vw;
  width:100vw; height:100vh;
  overflow-x:hidden;
  background: var(--bg-gradient);
  transition: background var(--transition);
}
.weather-bg {
  position:fixed;
  inset:0;
  z-index:0;
  background: var(--bg-gradient);
  transition: background var(--transition);
}
.weather-bg.sunny { background: var(--bg-sunny);}
.weather-bg.rain { background: var(--bg-rain);}
.weather-bg.night { background: var(--bg-night);}
.weather-bg.default { background: var(--bg-gradient);}
#weatherEffect {
  position:fixed;
  inset:0;
  width:100vw; height:100vh;
  z-index:1;
  pointer-events:none;
  display:block;
}

.app {
  position:relative;
  z-index:2;
  min-height:100vh;
  min-width:100vw;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:32px;
  padding:0;
}

.header {
  width:100%;
  max-width:540px;
  margin:40px auto 0 auto;
  display:flex; align-items:center; justify-content:space-between;
  gap:18px; flex-wrap:wrap;
  background:rgba(0,0,0,0.10);
  border-radius:var(--radius);
  padding:12px 18px;
  box-shadow:0 4px 24px rgba(0,0,0,0.10);
}
.search-bar {
  display:flex; gap:8px; align-items:center; flex:1;
}
.search-bar input {
  flex:1;
  padding:14px 18px;
  border-radius: 999px;
  border:none;
  background: #181c22;
  color: var(--text-light);
  font-size:1.15rem;
  font-family:inherit;
  outline:none;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  transition: background var(--transition), color var(--transition);
}
.search-bar input::placeholder { color: #7b8a9a; opacity:0.8; }
.search-btn, .geo-btn {
  width:44px; height:44px; border-radius:50%;
  border:none; background: var(--accent-gradient);
  color:#fff; font-size:1.3rem; font-weight:700;
  display:flex; align-items:center; justify-content:center;
  box-shadow: 0 2px 8px rgba(39,242,154,0.10), 0 2px 8px rgba(123,61,252,0.08);
  cursor:pointer; transition: box-shadow var(--transition), transform var(--transition);
  position:relative; z-index:1;
}
.search-btn:hover, .geo-btn:hover { box-shadow: 0 8px 32px rgba(39,242,154,0.18), 0 4px 16px rgba(123,61,252,0.12); transform: scale(1.08); }

.theme-switch {
  display: flex;
  align-items: center;
  gap: 10px;
}
.theme-label {
  color: var(--muted);
  font-size: 1.08rem;
  font-weight: 500;
  letter-spacing: 0.01em;
  user-select: none;
}
.switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;
}
.switch input { display: none; }
.slider {
  position: absolute;
  inset: 0;
  background: #23243a;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.04);
  transition: background 0.3s;
}
.slider::after {
  content: "";
  position: absolute;
  width: 20px; height: 20px;
  background: #fff;
  border-radius: 50%;
  top: 3px; left: 3px;
  transition: transform 0.18s cubic-bezier(.4,0,.2,1), background 0.3s;
  box-shadow: 0 2px 8px rgba(39,242,154,0.10);
}
.switch input:checked + .slider {
  background: var(--accent-gradient);
}
.switch input:checked + .slider::after {
  transform: translateX(20px);
  background: #fff;
}

.main {
  width:100vw;
  min-height:calc(100vh - 120px);
  display: flex;
  flex-direction: column;
  align-items:center;
  gap: 24px;
  justify-content:center;
}

.weather-panel {
  width:100%;
  max-width:540px;
  background: var(--panel-dark);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding:38px 32px 24px 32px;
  margin:0 auto;
  transition: background var(--transition), box-shadow var(--transition);
  display:flex; flex-direction:column; gap:18px;
  align-items:center;
  backdrop-filter: blur(2px);
  animation: fadeInPanel .7s cubic-bezier(.4,0,.2,1);
}
@keyframes fadeInPanel {
  from { opacity:0; transform: translateY(40px);}
  to   { opacity:1; transform: none;}
}
.city-country {
  font-size:2.1rem; font-weight:700; letter-spacing:0.01em;
  margin-bottom:2px;
  text-align:center;
  color:var(--accent2);
  text-shadow:0 2px 12px rgba(123,61,252,0.10);
}
.weather-main {
  display:flex; align-items:center; gap:32px; margin-bottom:2px;
}
.weather-icon {
  width:110px; height:110px; display:flex; align-items:center; justify-content:center;
  font-size:5rem;
  animation: weatherIconPop .7s cubic-bezier(.4,0,.2,1);
}
@keyframes weatherIconPop {
  0% { transform: scale(0.7) rotate(-10deg);}
  60%{ transform: scale(1.15) rotate(8deg);}
  100%{ transform: none;}
}
.weather-temp {
  font-size:4.2rem; font-weight:800; min-width:120px; text-align:right;
  transition: color var(--transition);
  animation: tempFadeIn .5s cubic-bezier(.4,0,.2,1);
  color:var(--accent);
  text-shadow:0 2px 12px rgba(39,242,154,0.10);
}
@keyframes tempFadeIn {
  from { opacity:0; transform: translateY(18px);}
  to   { opacity:1; transform: none;}
}
.weather-desc {
  font-size:1.35rem; color:var(--muted); text-align:center; margin-bottom:6px;
  text-transform: capitalize;
  font-weight:600;
  letter-spacing:0.01em;
}

.weather-cards {
  display:grid; grid-template-columns: repeat(5,1fr); gap:18px; margin-top:12px;
  width:100%;
}
.weather-card {
  background: var(--card-dark);
  border-radius:14px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  padding:18px 8px;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  min-width:70px;
  transition: background var(--transition), box-shadow var(--transition), transform .18s;
  font-size:1.08rem;
  animation: fadeInCard .7s cubic-bezier(.4,0,.2,1);
}
@keyframes fadeInCard {
  from { opacity:0; transform: translateY(24px);}
  to   { opacity:1; transform: none;}
}
.weather-card:hover {
  box-shadow: 0 6px 24px rgba(39,242,154,0.10), 0 2px 8px rgba(123,61,252,0.10);
  transform: scale(1.06);
}
.card-icon { font-size:1.5rem; margin-bottom:2px;}
.card-label { color:var(--muted); font-size:1.02rem;}
.card-value { font-size:1.18rem; font-weight:700; color:var(--accent2); }

.forecast-panel {
  width:100%;
  max-width:540px;
  background: var(--panel-dark);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding:18px 12px 12px 12px;
  margin:0 auto;
  margin-top:8px;
  transition: background var(--transition);
  backdrop-filter: blur(2px);
}
.forecast-title {
  font-size:1.25rem; font-weight:700; color:var(--accent2); margin-bottom:12px; letter-spacing:0.01em;
}
.forecast-list {
  display:flex; gap:18px; overflow-x:auto; padding-bottom:4px;
}
.forecast-day {
  background: var(--card-dark);
  border-radius:14px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  padding:16px 10px;
  min-width:90px;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  transition: background var(--transition), box-shadow var(--transition), transform .18s;
  cursor:pointer;
  font-size:1.08rem;
  animation: fadeInCard .7s cubic-bezier(.4,0,.2,1);
}
.forecast-day:hover {
  box-shadow: 0 6px 24px rgba(39,242,154,0.10), 0 2px 8px rgba(123,61,252,0.10);
  transform: translateY(-4px) scale(1.06);
}
.forecast-icon { font-size:2.1rem; margin-bottom:2px;}
.forecast-date { color:var(--muted); font-size:1.02rem;}
.forecast-temp { font-size:1.18rem; font-weight:700; color:var(--accent2); }

.footer {
  width:100%;
  max-width:540px;
  display:flex; align-items:center; justify-content:space-between;
  margin:24px auto 0 auto; gap:12px; flex-wrap:wrap;
  color:var(--muted); font-size:1.18rem;
  background:rgba(0,0,0,0.10);
  border-radius:var(--radius);
  padding:10px 18px;
  box-shadow:0 2px 8px rgba(0,0,0,0.10);
}
.clock { font-size:1.18rem; font-weight:700; letter-spacing:0.02em;}
.history {
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
}
.history-city {
  background: var(--card-dark);
  color:var(--accent2);
  border-radius:8px; padding:6px 14px; font-size:1.08rem;
  cursor:pointer; transition: background .18s, color .18s;
  border:1px solid transparent;
  font-weight:600;
}
.history-city:hover {
  background: var(--accent-gradient); color:#fff; border-color:var(--accent2);
}

.app.light .weather-panel,
.app.light .forecast-panel { background: #ebe0e0; color:var(--text-dark);}
.app.light .weather-card, .app.light .forecast-day { background: #f3f6fb; color:var(--text-dark);}
.app.light .weather-card .card-label, .app.light .forecast-date { color:#b0b5c2;}
.app.light .forecast-title { color:var(--accent2);}
.app.light .history-city { background: #f3f6fb; color:var(--accent2);}
.app.light .search-bar input { background: #f3f6fb; color:var(--text-dark);}
.app.light .search-bar input::placeholder { color:#b0b5c2; }
.app.light .footer { color:#b0b5c2; }
.app.light .clock { color:var(--accent2);}
.app.light .weather-temp { color:var(--accent2);}
.app.light .weather-main { color:var(--text-dark);}
.app.light .card-value, .app.light .forecast-temp { color:var(--accent2); }

.weather-bg.sunny { background: var(--bg-sunny);}
.weather-bg.rain { background: var(--bg-rain);}
.weather-bg.night { background: var(--bg-night);}
.weather-bg.default { background: var(--bg-gradient);}

@media (max-width: 800px) {
  .header, .weather-panel, .forecast-panel, .footer { max-width:98vw; }
  .main { gap:12px;}
}
@media (max-width: 600px) {
  .header, .weather-panel, .forecast-panel, .footer { max-width:100vw; border-radius:0; }
  .main { gap:8px;}
  .weather-panel { padding:16px 2vw 10px 2vw; }
  .forecast-panel { padding:8px 1vw 4px 1vw;}
  .weather-cards { grid-template-columns: repeat(2,1fr);}
  .forecast-list { gap:8px;}
  .forecast-day { min-width:68px; padding:7px 4px;}
  .footer { font-size:1rem;}
}